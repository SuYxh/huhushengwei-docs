import{o as e,c as t,b as l}from"./app.157864df.js";const i='{"title":"15-说说nextTick的使用和原理？","description":"","frontmatter":{},"headers":[{"level":2,"title":"15-说说nextTick的使用和原理？","slug":"_15-说说nexttick的使用和原理？"},{"level":3,"title":"分析","slug":"分析"},{"level":3,"title":"答题思路","slug":"答题思路"},{"level":3,"title":"回答范例：","slug":"回答范例："},{"level":3,"title":"知其所以然：","slug":"知其所以然："},{"level":2,"title":"","slug":""}],"relativePath":"frame/vue/15-说说nextTick的使用和原理.md","lastUpdated":1662433250869}',r={},n=[l('<h2 id="_15-说说nexttick的使用和原理？">15-说说nextTick的使用和原理？</h2><h3 id="分析">分析</h3><p>这道题及考察使用，有考察原理，nextTick在开发过程中应用的也较少，原理上和vue异步更新有密切关系，对于面试者考查很有区分度，如果能够很好回答此题，对面试效果有极大帮助。</p><h3 id="答题思路">答题思路</h3><ol><li>nextTick是做什么的？</li><li>为什么需要它呢？</li><li>开发时何时使用它？抓抓头，想想你在平时开发中使用它的地方</li><li>下面介绍一下如何使用nextTick</li><li>原理解读，结合异步更新和nextTick生效方式，会显得你格外优秀</li></ol><hr><h3 id="回答范例：">回答范例：</h3><ol><li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fstaging-cn.vuejs.org%2Fapi%2Fgeneral.html%23nexttick" target="_blank" rel="noopener noreferrer">nextTick</a>是等待下一次 DOM 更新刷新的工具方法。</li><li>Vue有个异步更新策略，意思是如果数据变化，Vue不会立刻更新DOM，而是开启一个队列，把组件更新函数保存在队列中，在同一事件循环中发生的所有数据变更会异步的批量更新。这一策略导致我们对数据的修改不会立刻体现在DOM上，此时如果想要获取更新后的DOM状态，就需要使用nextTick。</li><li>开发时，有两个场景我们会用到nextTick：</li></ol><ul><li>created中想要获取DOM时；</li><li>响应式数据变化后获取DOM更新后的状态，比如希望获取列表更新后的高度。</li></ul><ol><li><p>nextTick签名如下：<code>function nextTick(callback?: () =&gt; void): Promise&lt;void&gt;</code></p><p>所以我们只需要在传入的回调函数中访问最新DOM状态即可，或者我们可以await nextTick()方法返回的Promise之后做这件事。</p></li><li><p>在Vue内部，nextTick之所以能够让我们看到DOM更新后的结果，是因为我们传入的callback会被添加到队列刷新函数(flushSchedulerQueue)的后面，这样等队列内部的更新函数都执行完毕，所有DOM操作也就结束了，callback自然能够获取到最新的DOM值。</p></li></ol><hr><h3 id="知其所以然：">知其所以然：</h3><ol><li>源码解读:</li></ol><p>组件更新函数入队：</p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub1s.com%2Fvuejs%2Fcore%2Fblob%2FHEAD%2Fpackages%2Fruntime-core%2Fsrc%2Frenderer.ts%23L1547-L1548" target="_blank" rel="noopener noreferrer">github1s.com/vuejs/core/…</a></p><p>入队函数：</p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub1s.com%2Fvuejs%2Fcore%2Fblob%2FHEAD%2Fpackages%2Fruntime-core%2Fsrc%2Fscheduler.ts%23L84-L85" target="_blank" rel="noopener noreferrer">github1s.com/vuejs/core/…</a></p><p>nextTick定义：</p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub1s.com%2Fvuejs%2Fcore%2Fblob%2FHEAD%2Fpackages%2Fruntime-core%2Fsrc%2Fscheduler.ts%23L58-L59" target="_blank" rel="noopener noreferrer">github1s.com/vuejs/core/…</a></p><ol><li>测试案例，test-v3.html</li></ol><hr><h2 id=""></h2>',22)];r.render=function(l,i,r,c,o,s){return e(),t("div",null,n)};export default r;export{i as __pageData};
